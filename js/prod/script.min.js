$(document).ready(function(){function e(){$("#regBtn").on("click",function(e){e.preventDefault();var t,n=$("#newName").val(),a=$("#newPass").val(),o={username:n,password:a};t=JSON.stringify(o);var s=$.ajax({type:"POST",contentType:"application/json",url:l+"api/register/",data:t,dataType:"json",success:function(e){gsonProductComments3=JSON.parse(s.responseText),e.success===!0?(alert("Successful registration! Now Log In"),$("#modalReg").modal("hide")):$(".validRegistration").removeClass("hidden")}})})}function t(){$("#logInBtn").on("click",function(e){e.preventDefault();var t=$("#logName").val(),a=$("#logPass").val(),o={username:t,password:a};jsonStr=JSON.stringify(o);var i=$.ajax({type:"POST",contentType:"application/json",url:l+"api/login/",data:jsonStr,dataType:"json",success:function(e){d=JSON.parse(i.responseText),e.success===!0?($("#registrationMenu").addClass("hidden"),$(".new-review").removeClass("hidden"),$("#title").html(p[0].title),document.getElementById("idImg").src="http://smktesting.herokuapp.com/static/"+p[0].img,$("#description").html(p[0].text),$(".itemView").removeClass("hidden"),$(".exit").removeClass("hidden"),s(),n()):$(".loginValidation").removeClass("hidden")}})})}function n(){$(".btnReview").click(function(){"product1"===$(".products").text()?$.ajax({type:"POST",url:"http://smktesting.herokuapp.com/api/reviews/1",data:{rate:$(":radio[name=star]:checked").val(),text:$("#content").val()},headers:{Authorization:"Token "+d.token},dataType:"json",success:function(){$("#content").val("")}}):$.ajax({type:"POST",url:"http://smktesting.herokuapp.com/api/reviews/2",data:{rate:$(":radio[name=star]:checked").val(),text:$("#content").val()},headers:{Authorization:"Token "+d.token},dataType:"json",success:function(){$("#content").val("")}})})}function a(){var e=$.ajax({type:"GET",contentType:"application/json",url:l+"api/products/",dataType:"json",success:function(t){p=JSON.parse(e.responseText);for(var n=0;n<p.length;n++)$("#productFirst").on("click",function(){$("#commentsReview").html(""),$("#title").html(p[0].title),document.getElementById("idImg").src="http://smktesting.herokuapp.com/static/"+p[0].img,$("#description").html(p[0].text),s(),$(".itemView").removeClass("hidden")}),$("#productSecond").on("click",function(){$("#commentsReview").html(""),$("#title").html(p[1].title),document.getElementById("idImg").src="http://smktesting.herokuapp.com/static/"+p[1].img,$("#description").html(p[1].text),i(),$(".itemView").removeClass("hidden")})}})}function o(){var e=$.ajax({type:"GET",contentType:"application/json",url:l+"api/reviews/1",dataType:"json",success:function(t){r=JSON.parse(e.responseText)}}),t=$.ajax({type:"GET",contentType:"application/json",url:l+"api/reviews/2",dataType:"json",success:function(e){c=JSON.parse(t.responseText)}})}function s(){for(var e in r)$("<div></div>").addClass("review").attr("id",r[e].id).appendTo($(".comments")),$("<span></span>").addClass("reviewRate").html("Rate :"+r[e].rate).appendTo($(".review")[e]),$("<p></p>").addClass("reviewComment").html("Comment text :"+r[e].text).appendTo($(".review")[e])}function i(){for(var e in c)$("<div></div>").addClass("review").attr("id",c[e].id).appendTo($(".comments")),$("<span></span>").addClass("reviewRate").html("Rate :"+c[e].rate).appendTo($(".review")[e]),$("<p></p>").addClass("reviewComment").html("Comment text :"+c[e].text).appendTo($(".review")[e])}var r,c,d,p,l="http://smktesting.herokuapp.com/";e(),t(),a(),o(),$(".exit").click(function(){window.location.reload()})}),$(window).load(function(){$(".loader_inner").fadeOut(),$(".loader").delay(400).fadeOut("slow")});